@inject AuthenticationStateProvider authenticationStateProvider
@inject NavigationManager navigationManager

<AuthorizeView>
    <MudMenu>
        <ActivatorContent>
            <MudAvatar Color="Color.Primary">@context.User.Claims.FirstOrDefault().Value.ToUpper()[0]</MudAvatar>
        </ActivatorContent>
        <ChildContent>
            <MudMenuItem>Profile</MudMenuItem>
            <MudMenuItem>Theme</MudMenuItem>
            <MudMenuItem>Usage</MudMenuItem>
            <MudMenuItem>Sign Out</MudMenuItem>
        </ChildContent>
    </MudMenu>
    <MudIconButton Icon="@Icons.Material.Filled.Logout" Class="ml-3" OnClick="Logout" />
</AuthorizeView>

@code {

    async Task Logout()
    {
        var localstateProvider = (LocalAuthenticationStateProvider)authenticationStateProvider;
        await localstateProvider.LogoutAsync();
        navigationManager.NavigateTo("/auth/login");
    }
}
